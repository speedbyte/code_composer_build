/*-----------------------------------------------------------------------------+
|            ____    ___            ____    _____           ____               |
|           |    |  |   \   |      |    |     |    |    |  |                   |
|           |____|  |    |  |      |____|     |    |    |  |____               |
|           |    |  |    |  |      |    |     |    |    |       |              |
|           |    |  |___/   |____  |    |     |    |____|   ____|              |
|                                                                              |
|           T H E   S M A R T   E M B E D D E D   S O L U T I O N              |
|                                                                              |
+------------------------------------------------------------------------------+
| F I L E   I N F O R M A T I O N                                              |
+------------------------------------------------------------------------------+
|                                                                              |
|  Filename:  ADLATUS_Periphery.c                                              |
|                                                                              |
|  Comment:   This file includes all setup functions for the pheriphery        |
|             initialisation of the SMART ADLATUS.                             |
|                                                                              |
+------------------------------------------------------------------------------+
| A U T H O R   I D E N T I T Y                                                |
+------------------------------------------------------------------------------+
|                                                                              |
| Initials     Name                      Company                               |
| --------     ---------------------     ----------------------------------    |
|   RS         Ralf Schmidgall           SMART Electronic Development GmbH     |
|                                                                              |
+------------------------------------------------------------------------------+
| R E V I S I O N   H I S T O R Y                                              |
+------------------------------------------------------------------------------+
|
| Subversion Info:
| $Id: ADLATUS_Periphery.c 4408 2008-11-06 17:15:01Z maennel $
| $HeadURL: http://smartsvn/svn/adlatusrepository/auslieferungen/S1NN/086350-S1NN-ADLATUS-TMS470R-MucSuc/20081201_S1NN_TMS470R_BlfIso-Source_V1.00/01_SW_Projekt/01_adlatus/02_src/ADLATUS_Periphery.c $
|
+------------------------------------------------------------------------------+
|      (c) SMART ELECTRONIC DEVELOPMENT GMBH - all rights reserved             |
+-----------------------------------------------------------------------------*/

/* ========================================================================== */
/* (1)  I N C L U D E S                                                       */
/* -------------------------------------------------------------------------- */
/*      C O N S T A N T   D E F I N I T I O N   F I L E S  (CDF)              */
/* ========================================================================== */
/* NO ENTRY                                                                   */

/* ========================================================================== */
/* (2)  I N C L U D E S                                                       */
/* -------------------------------------------------------------------------- */
/*      T Y P E   D E F I N I T I O N   F I L E S  (TDF)                      */
/* ========================================================================== */
#include "ADLATUS_Types_tdf.h"                 /* must be the first include   */
#include "ADLATUS_Periphery_tdf.h"
#include "ADLATUS_Hal_tdf.h"
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*/
/* Register Set of the MicroController                                        */
/* - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - -*/
#include "tms470regs.h"

/* ========================================================================== */
/* (3)  C O M P I L E R   S W I T C H   S E T T I N G S                       */
/* -------------------------------------------------------------------------- */
/*      O N L Y   F O R   T H I S   M O D U L                                 */
/* ========================================================================== */
/* Global Compiler switch settings are done at ADLATUS_CompilerSwitches_CDF.h */
/*- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - */
/* Local compiler switches:  NO ENTRY                                         */

/* ========================================================================== */
/* (4)  D A T A   S E C T I O N   D I R E C T I V E S                         */
/* -------------------------------------------------------------------------- */
/*      O N L Y   F O R   T H I S   M O D U L                                 */
/* ========================================================================== */
/* NO ENTRY                                                                   */

/* ========================================================================== */
/* (5)  L O C A L   D E F I N E S                                             */
/* -------------------------------------------------------------------------- */
/*      O N L Y   F O R   T H I S   M O D U L                                 */
/* ========================================================================== */
/* NO ENTRIES                                                                 */

/* ========================================================================== */
/* (6)  L O C A L  T Y P E   D E F I N E S                                    */
/* -------------------------------------------------------------------------- */
/*      O N L Y   F O R   T H I S   M O D U L                                 */
/* ========================================================================== */
/* NO ENTRIES                                                                 */

/* ========================================================================== */
/* (7)  L O C A L   V A R I A B L E S  / C O N S T A N T S                    */
/* -------------------------------------------------------------------------- */
/*      O N L Y   F O R   T H I S   M O D U L                                 */
/* ========================================================================== */
/* NO ENTRIES                                                                 */

/* ========================================================================== */
/* (8)  L O C A L   F U N C T I O N   P R O T O T Y P E S                     */
/* -------------------------------------------------------------------------- */
/*      O N L Y   F O R   T H I S   M O D U L                                 */
/* ========================================================================== */
/* NO ENTRIES                                                                 */

/* ========================================================================== */
/* (9)  G L O B A L   V A R I A B L E S                                       */
/* -------------------------------------------------------------------------- */
/*      D E F I N E D   W I T H I N   T H I S   M O D U L                     */
/* ========================================================================== */
/* No entry                                                                   */

/* ========================================================================== */
/* (10) F U N C T I O N   D E F I N I T I O N S                               */
/* -------------------------------------------------------------------------- */
/*      F O R   T H I S   M O D U L                                           */
/* ========================================================================== */

/******************************************************************************/
/******************************************************************************/
/**                                                                          **/
/**     APPLICATION AREA: SET_IO.01                                          **/
/**     ----------------------------------------------------------------     **/
/**     S Y S T E M   C O N F I G U R A T I O N                              **/
/**     ----------------------------------------------------------------     **/
/**                                                                          **/
/**                                                                          **/
/******************************************************************************/
/******************************************************************************/

/*lint -e40 */
/*-----------------------------------------------------------------------------+
|    F U N C T I O N   I N F O R M A T I O N                                   |
+------------------------------------------------------------------------------+
|                                                                              |
|  Function Name:  FUN_CCper_InitIOStartup_V                                   |
|                                                                              |
|  Prototype at:   ADLATUS_Periphery_tdf.h                                     |
|                                                                              |
|  Description:    CUSTOMER INTERFACE:                                         |
|                  Set the project Input/Output configuration to a safety      |
|                  state.                                                      |
|                                                                              |
|  Parameter:       --                                                         |
|                                                                              |
|  Return Value:    --                                                         |
|                                                                              |
+-----------------------------------------------------------------------------*/
void FUN_CCper_InitIOStartup_V (void)
{

/*  e_SARSYS_ST.ClkCntl_UW &= ~0x0068u;
  e_SARSYS_ST.ClkCntl_UW |= 0x0010u;
*/
  e_GIO_ST.Port_ST[1].Dir_UL = 0x0000ul;
  e_GIO_ST.Port_ST[1].Dclr_UL = 0x0000ul;

  /* configure pin 36 as output for togglepin usage */
  e_GIO_ST.Port_ST[0].Dir_UL |= 0x0010ul;
  e_GIO_ST.Port_ST[0].Dset_UL = 0x0010ul;


  /* Marc Rammelt
     EEPROM und WD Initialisierung einarbeiten. */

  e_GIO_ST.Port_ST[3].Dir_UL |= 0x0001ul;
  e_GIO_ST.Port_ST[3].Dclr_UL = 0x0001ul;

  return;

} /*-+- END OF FUNCTION 'FUN_CCper_InitIOStartup_V' -+-+-+-+-+-+-+-+-+-+-+-+-+*/

/******************************************************************************/
/******************************************************************************/
/**                                                                          **/
/**     APPLICATION AREA: SET_IO.02                                          **/
/**     ----------------------------------------------------------------     **/
/**     S Y S T E M   C O N F I G U R A T I O N                              **/
/**     ----------------------------------------------------------------     **/
/**								                                             **/
/**                                                                          **/
/******************************************************************************/
/******************************************************************************/

/*-----------------------------------------------------------------------------+
|    F U N C T I O N   I N F O R M A T I O N                                   |
+------------------------------------------------------------------------------+
|                                                                              |
|  Function Name:  FUN_CCper_InitIOForAdlatus_V                                |
|                                                                              |
|  Prototype at:   ADLATUS_Periphery_tdf.h                                     |
|                                                                              |
|  Description:    CUSTOMER INTERFACE:                                         |
|                  Set the project Input/Output configuration to a safety      |
|                  state.                                                      |
|                                                                              |
|  Parameter:       --                                                         |
|                                                                              |
|  Return Value:    --                                                         |
|                                                                              |
+-----------------------------------------------------------------------------*/
void FUN_CCper_InitIOForAdlatus_V (void)
{
  /* wake up the CAN Transceiver */
  /* first pin 61 to high, followed by pin 77 to high */

  /* pin 61 is configured via SPI5  */
  /* SPIENA pin is an output */
  e_SPI5_ST.pc1_UN.pc1_ST.EnableDir_B1 = 1;
  /* SPIENA pin set high */
  e_SPI5_ST.pc4_UN.pc4_ST.EnableDoutSet_B1 = 1;

  /* pin 77 is configured via CAN3 */
  /* CAN3HRX pin is an output */
  /* CAN3HRX pin set high */
  e_SCC3_ST.CANRIOC_UN.CANRIOC_UL = (ULONG)0x0006u;

  /* pin configuration to connect PARROT */
  /* setup only for NRESET and BOOTS. */
  /* RX and TX of SCI2 via alternate pinfunction */
  e_GIO_ST.Port_ST[3].Dir_UL |= 0x0006u;   /* output on pin 19+20 */
  e_GIO_ST.Port_ST[3].Dset_UL = 0x0006u;    /* set pin 19+20 high */
  return;

} /*-+- END OF FUNCTION 'FUN_CCper_InitIOForAdlatus_V' -+-+-+-+-+-+-+-+-+-+-+-*/

/*lint +e40 */

/* ========================================================================== */
/*      E N D   O F   F I L E                                                 */
/* ========================================================================== */
